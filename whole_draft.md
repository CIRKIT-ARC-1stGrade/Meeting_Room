# ①導入  
  
* ROS学習だの１回生のつくばチャレンジ体験だのを目的に制作  
* 五号機ことKIT-C5のつくばチャレンジでの活躍やいかに  
  
# ②ハードウェアについて  
  
## 基本構造  
T-flog Projectが公開しているi-Cart mini というロボットフレームをベースに開発  
大会の規定に合わせて、高さ稼ぎや安全対策を施した  
  
具体的には、、  
  
1. サイズ規定  
   高さ60cm以上！！  
   - 支柱を立ててかろうじてクリア  
2. 非常停止スイッチの設置  
   - ソフトウェアを介さずに動力供給   
3. 非常停止の簡単な走行再開指示  
   開発過程で有田さんが指摘されてたロボットが非常停止の後に、復帰可能であること  
   システムを殺さずに、モータ駆動だけを停止させる  
4. ロボットの形状と外観   
   * ロボットは突起部分や高温部分、感電の恐れのある部分を有しないこと。  
     - アルミフレームの角にはバンパーを貼り付ける  
     - プラスチックダンボールで全体を覆う  
   * また子供の手や足等を巻き込む恐れのない構造であること。  
   * 見えやすい形と色であること。  
     - つみ木かってくらい見やすい形状  
     - プラダンに赤いゴムテープを貼っつけて真っ赤に  
   * 地上高10cm-30cmの幅はロボットの平面形状（地面に投影した形状）に沿うこと  
     - プラダンで現地制作  
  
## ポリバケツ不採用  
  
高さを稼ぐ形状を確定  
  
* できるだけ工房にあるものを活用  
* フレームと一体ではない  
* 強度的に信頼のならないプラッチックをかぶせたとしてロボット暴走時の緊急スイッチ押下の衝撃力はどうなるのか  
* 大きなカバーをかぶせたとしてメンテナンス性をどう確保するのか?  
* 着脱式にするとして固定どうするのか?  
* 技術力の不足を感じさせる  
  
## 問題点  
* 外装について, 『フレーム,機能部とハリボテ』思想では不十分である. 強度, 耐力, 保護能力, 維持管理その他全てについて不十分である.  
	- 専用設計で作り起こす, 現状 FRP で専用に固めて作るのが有効かと思っている.(趣味用に一般的で, 完全な防水性を持つ)  
	- 点検ハッチとかが付けたい  
	- 役物をすべて正しい位置に格納できるようにしたい. そして全てに完全な固定と被覆を提供したい  
	- いざとなればネジ6本くらいで全部外せるようにしたい  
  
* フレームがガタガタギシギシ言ってどうにもならない    
→ロックタイトなどを使う    
→いつものネジ止めアルミフレームを止めにする    
	- もう少しマシな設計を試みる  
	- 外皮にも応力を分散させたいし, 何より格好悪い <- 重要  
  
* わかってたことだが, センサが坂を読んでいる  
	- LIDAR とか導入しちゃう?  
  
* タイヤが小さすぎて, 小石にも躓いている  
	- 上半身に対して下半身が貧弱すぎる  
	- 振動のせいだと思うけれど, odom が壊滅的  
	- 最低でもサスほしい  
* 制御ゲインが不適切で, スピンに入ると発散して死ぬ  
  
  
# ③ソフトウェアについて  
来てくれている一回生のために、基礎的なところから  
簡単に説明したいと思います  
## ROSのおさらい  
* _ノード_(node)  
    - ROSの最小の構成要素（実行プログラム）  
    - pyphonやC++でかけるよ  
    - teleop\_master\_node(.cpp), goal\_sender\_node(.cpp)など  
* _パッケージ_(package)  
    - ノードやROSライブラリや環境設定ファイルなどの集合体  
    - move\_base, gmapping など  
* _メタパッケージ_(metapackage)  
    - パッケージの集合体  
    - navigationなど  
* _メッセージ_(message)  
    - データ及びその集合  
    - ノード間でやり取りされる  
* _トピック_(topic)  
    - メッセージの送受信をする際の方式  
    - 一方通行＆非同期方式  
    - メッセージを送信すること・もの(publish/publisher)  
    - メッセージを受信すること・もの(subscribe/subscriber)  
* _パラメータ_(parameter)  
    - ノード内で使用される設定値   
  
## 自律移動に必要な機能  
  
自律移動　＝　方向を自分で判断ながら走行すること(navigation)  
  
1. 自分がどこにいるのかを判断する（自己位置推定）  
   - モーターの回転数から計算する（オドメトリ）  
   - 地図と周りの状況を照らし合わせる  
2. 地図を作成する  
3. センサーから周りの状況を読み取る  
4. 障害物に対しどう動くかを判断する  
   - 自分のシルエットや各パーツとの位置関係を把握する  
5. 何を目標に走行すればよいのかを把握する  
6. コントローラーからの司令の読み取り  
7. モーターを動かす  
    
### 7. モータを動かす  
  
* yp-spur  
    - i-Cart mini を操作するための制御プログラム  
    - ROSとは別物  
    - これとモータードライバでモーターに直接命令を出す  
* ypspur\_ros\_bridge  
    - ROSからの命令(cmd_vel)をyp-spurに伝達する  
    - モーターの回転数をROSに伝達する（オドメトリ）  
    - 橋渡しの役割  
  
### 3. センサーから周りの状況を読み取る  
* urg\_node  
    - センサーからの情報を取得・伝達  
  
  
### 2. 地図を作成する  
* slam\_gmapping/gmapping  
    - センサーの値とオドメトリから地図を作成  
  
  
## 基本構造  
  
ROS ver Kinetic  
  
* navigation  
  
    - move\_base  
    - amcl  
    - map_server  
  
* slam\_gmapping  
  
    - gmapping  
  
* yp-spur  
  
* urg\_node  
  
# ④反省点  
  
1. とりかかりが遅い  
2. １回生の積極性のなさ  
* gitを見れば先輩方が１回生に向けた説明をつけててくださったり、  
参加募集を匂わせるようなことをissueのあちらこちらに書いてくださっていた  
-->一年は基本gitを見ていない  
気づいていない  
3. 部品がやや不足  
  
# ⑤今後取り入れたいこと  
* ハード面強化  
  - タイヤを大きくする  
  - 装甲にもうちょい金をかける  
* センサーの位置を4号機と合わせて効率化を図る  
* 腰が死ぬので持ち運び用のとってを設置する  
* 起動をさらに簡略化（地図作成時など）  
* 学内案内ロボットにするために設計しなおし  
  - 高さを出す  
  - タッチパネルを設置  
